take note: High salinity has negative GSI values (SWIR dominance).
Low salinity has positive GSI values (GREEN dominance).

var roi = Select your AOI

// 1. Load Sentinel-2 SR Data

var sen = ee.ImageCollection("COPERNICUS/S2_SR_HARMONIZED")
  .filterDate('2023-04-01', '2023-11-30')
  .filter(ee.Filter.lt('CLOUDY_PIXEL_PERCENTAGE', 10))
  .filterBounds(roi)
  .select(['B3', 'B11']);   // Green & SWIR

print('Sentinel-2 Collection:', sen);

// 2. Compute Green–SWIR Index
var addIndex = function(img) {
  var gsi = img.normalizedDifference(['B3', 'B11']).rename('GSI'); 
  return img.addBands(gsi);
};

var senIndex = sen.map(addIndex);

// Median composite of the index
var gsiMedian = senIndex.select('GSI').median();


// 3. Compute Max and Min Values

var gsiMax = gsiMedian.reduceRegion({
  reducer: ee.Reducer.max(),
  geometry: roi,
  scale: 10,
  bestEffort: true
});

var gsiMin = gsiMedian.reduceRegion({
  reducer: ee.Reducer.min(),
  geometry: roi,
  scale: 10,
  bestEffort: true
});

print('GSI MAX value:', gsiMax);
print('GSI MIN value:', gsiMin);


// 4. Visualization

var gsiVis = {
  min: -1,
  max: 1,
  palette: ['blue', 'white', 'red']
};


// 5. Export as GeoTIFF

Export.image.toDrive({
  image: gsiMedian,
  description: 'Green_SWIR_Index_2023',
  folder: 'Nyran Works',
  fileNamePrefix: 'GSI_Median_2023',
  region: roi,
  scale: 10,
  maxPixels: 1e13
});

// 6. Add to Map
Map.centerObject(roi, 10);
Map.addLayer(gsiMedian, gsiVis, 'Green–SWIR Salinity Index');
